$ORIGIN b0x.pw.
$TTL 30m

@ IN SOA the.main root.post ( 1 4h 1h 2w 1h )

@ IN NS the.main
@ IN NS the.far

@ IN A <%= @hosts[:f0rk][:v4] %>
@ IN AAAA <%= @hosts[:f0rk][:v6] %>

the.main IN A <%= @hosts[:f0rk][:v4] %>
the.main IN AAAA <%= @hosts[:f0rk][:v6] %>
the.far IN A <%= @hosts[:airstrip3][:v4] %>
the.far IN AAAA <%= @hosts[:airstrip3][:v6] %>
the.smart IN A <%= node[:ex1t][:v4] %>
the.smart IN AAAA <%= node[:ex1t][:v6] %>

<%- @hosts.each do |hostname, data| -%>
s.<%= data[:dns_shortname] %> IN A <%= data[:v4] %>
s.<%= data[:dns_shortname] %> IN AAAA <%= data[:v6] %>

x.<%= hostname.to_s %> IN A <%= data[:v4] %>
x.<%= hostname.to_s %> IN AAAA <%= data[:v6] %>
<%- end %>

<%- %w[the.smart x.ex1t s.x1].each do |name| %>
<%= name %> IN A <%= node[:ex1t][:v4] %>
<%= name %> IN AAAA <%= node[:ex1t][:v6] %>
<%- end %>

@ IN NSEC3PARAM 1 0 0 -

@ IN CAA 128 issue "letsencrypt.org;validationmethods=dns-01"
@ IN CAA 128 issuewild "letsencrypt.org;validationmethods=dns-01"
@ IN CAA 128 iodef "mailto:reports.acme@post.b0x.pw"

@ IN MX 0 .
@ IN TXT "v=spf1 -all"

post IN MX 10 the.main
post IN MX 20 the.far
post IN TXT "v=spf1 mx -all"

_dmarc IN TXT " v=DMARC1; p=quarantine; rua=mailto:reports.dmarc.a@post.b0x.pw; ruf=mailto:reports.dmarc.f@post.b0x.pw; sp=quarantine; fo=0; pct=100; adkim=s; aspf=s"
_smtp._tls IN TXT "v=TLSRPTv1; rua=mailto:reports.tls@post.b0x.pw"

the.main IN SSHFP 4 2 44bdb60a2540ac1034fae5e85b7d20fce866d8beb18bc92c263407be8e0c008e
the.far IN SSHFP 4 2 b286bd1c4d4284da38cae475a7865da4d3ca9dca766b55d1e6c6f115a532a136
