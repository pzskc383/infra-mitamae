$ORIGIN pzskc383.dp.ua.
$TTL 30m

; SOA - serial managed by Knot (dateserial policy)
@ IN SOA a1 hostmaster ( 1 4h 1h 2w 1h )

; NS records
@ IN NS a1
@ IN NS b0

@ IN NSEC3PARAM 1 0 0 -

; CAA
@ IN CAA 128 issue "letsencrypt.org;validationmethods=dns-01"
@ IN CAA 128 issuewild "letsencrypt.org;validationmethods=dns-01"
@ IN CAA 128 iodef "mailto:abuse+caa@pzskc383.dp.ua"

; Host A/AAAA records
<% @hosts.each do |hostname, data| -%>
<%= data[:dns_shortname] %> IN A <%= data[:v4] %>
<%= data[:dns_shortname] %> IN AAAA <%= data[:v6] %>
<% end -%>

; Apex points to web primary (a1)
@ IN A <%= @hosts["airstrip1"][:v4] %>
@ IN AAAA <%= @hosts["airstrip1"][:v6] %>

; CNAMEs for inventory hostnames
<% @hosts.each do |hostname, data| -%>
<%= hostname %> IN CNAME <%= data[:dns_shortname] %>
<% end -%>

; Common service CNAMEs
www IN CNAME a1
i IN CNAME a1
image IN CNAME a1
img IN CNAME a1

; Disabled services
_imaps._tcp IN SRV 0 0 0 .
_pop3._tcp IN SRV 0 0 0 .
_pop3s._tcp IN SRV 0 0 0 .
